import{u as _,f as Z,g as ee,h as U,i as te,P as ae,t as se,j as le,k as L,l as w,m as re,n as Y,p as a,q as ie,R as B,s as oe,v as ne,x as ce,y as O,z as $,C as de,A as ue,B as me,D as he,E as pe,F as ve,G as ye,H as ge,I as be,J as ke,K as R}from"./app-B95FEo_2.js";const qe=["/","/about/","/database/","/dev-tools/homebrew.html","/dev-tools/","/front-end/","/java/","/project/","/resource-sharing/e-books.html","/resource-sharing/","/spring-series/","/about/author/","/about/journey/","/about/update/","/computer/cn/","/computer/cn/cn-tcp-3-4.html","/computer/co/","/computer/ds/complexity.html","/computer/ds/data-structure-concept.html","/computer/ds/linear-list.html","/computer/ds/","/computer/os/","/database/mysql/constraint.html","/database/mysql/dividing-databases-tables.html","/database/mysql/function-base.html","/database/mysql/innodb-engine.html","/database/mysql/innodb-mvcc.html","/database/mysql/master-slave-replication.html","/database/mysql/multi-table-query.html","/database/mysql/mysql-base.html","/database/mysql/mysql-index.html","/database/mysql/mysql-lock.html","/database/mysql/mysql-log.html","/database/mysql/mysql-manage.html","/database/mysql/mysql-trigger.html","/database/mysql/mysql-view.html","/database/mysql/read-write-separation.html","/database/mysql/","/database/mysql/sql-general-syntax.html","/database/mysql/sql-optimize.html","/database/mysql/sql-perfomance-analysis.html","/database/mysql/storage-engine.html","/database/mysql/store-procedure.html","/database/mysql/transaction.html","/database/redis/","/database/redis/redis-advance-batch-optimization.html","/database/redis/redis-advance-cache-issues.html","/database/redis/redis-advance-cache-synchronization.html","/database/redis/redis-advance-cluster-best-practices.html","/database/redis/redis-advance-jvm-process-cache.html","/database/redis/redis-advance-key-value-design.html","/database/redis/redis-advance-lua-language.html","/database/redis/redis-advance-master-slave.html","/database/redis/redis-advance-multi-level-cache.html","/database/redis/redis-advance-persistence.html","/database/redis/redis-advance-sentinel.html","/database/redis/redis-advance-server-optimization.html","/database/redis/redis-advance-sharded-cluster.html","/database/redis/redis-client-jedis-connection-pool.html","/database/redis/redis-client-jedis-quick-start.html","/database/redis/redis-client-redistemplate-redis-serializer.html","/database/redis/redis-client-spring-data-redis.html","/database/redis/redis-introduction-base-commind.html","/database/redis/redis-introduction-concept-fundamental.html","/database/redis/redis-introduction-five-base-datatype.html","/database/redis/redis-introduction-pub-sub.html","/database/redis/redis-introduction-scription.html","/database/redis/redis-introduction-stream.html","/database/redis/redis-introduction-three-special-datatype.html","/database/redis/redis-introduction-transaction.html","/database/redis/redis-principle-IO.html","/database/redis/redis-principle-base-datatype-implement.html","/database/redis/redis-principle-communication-protocol.html","/database/redis/redis-principle-datastruct-underlying-implementation.html","/database/redis/redis-principle-memery-strategy.html","/database/redis/redis-principle-netword-model.html","/database/redis/redis-principle-redisobject.html","/dev-tools/docker/docker-basic.html","/dev-tools/docker/docker-compose.html","/dev-tools/docker/docker-container-connection.html","/dev-tools/docker/docker-dockerfile.html","/dev-tools/docker/docker-helloworld.html","/dev-tools/docker/docker-install.html","/dev-tools/docker/docker-introduce.html","/dev-tools/docker/docker-object.html","/dev-tools/docker/docker-warehouse.html","/dev-tools/docker/docker-web-containers.html","/dev-tools/docker/","/dev-tools/git/git-basic-operations.html","/dev-tools/git/git-branch-manage.html","/dev-tools/git/git-content-operations.html","/dev-tools/git/git-introduce-install.html","/dev-tools/git/git-remote-manage.html","/dev-tools/git/git-workspace-index-repo.html","/dev-tools/git/","/dev-tools/idea/","/dev-tools/idea/shortcuts.html","/dev-tools/maven/","/front-end/vue3/create-vue-project.html","/front-end/vue3/","/java/collection/list-arraylist.html","/java/collection/list-linkedlist.html","/java/collection/list-stack.html","/java/collection/map-hashmap.html","/java/collection/map-linkedhashmap.html","/java/collection/map-treemap.html","/java/collection/queue-deque.html","/java/collection/queue-queue.html","/java/collection/","/java/collection/set-hashset.html","/java/collection/set-linkedhashset.html","/java/collection/set-treeset.html","/java/core/annotation.html","/java/core/basic-grammar.html","/java/core/class-and-object.html","/java/core/exception.html","/java/core/generics.html","/java/core/jdk-env-path.html","/java/core/","/java/core/reflection.html","/java/io/file.html","/java/io/io-stream-system.html","/java/io/","/java/jvm/redemd.html","/java/thread/","/project/sky-take-out/BackEnd-Dev-Build.html","/project/sky-take-out/Database-Dev-Build.html","/project/sky-take-out/FrontEnd-Dev-Build.html","/project/sky-take-out/","/spring-series/spring/annotations-beans.html","/spring-series/spring/implement-ioc.html","/spring-series/spring/introduction-case.html","/spring-series/spring/","/spring-series/spring/spring-aop.html","/spring-series/spring/spring-aot.html","/spring-series/spring/spring-data-validation.html","/spring-series/spring/spring-i18n.html","/spring-series/spring/spring-ioc.html","/spring-series/spring/spring-junit.html","/spring-series/spring/spring-resources.html","/spring-series/spring/spring-summarize.html","/spring-series/spring/spring-transaction.html","/spring-series/spring/xml-beans.html","/spring-series/springboot/","/computer/cn/application-layer/","/computer/cn/cn-architecture/","/computer/cn/cn-architecture/cn-classification.html","/computer/cn/cn-architecture/cn-notion-composition-function.html","/computer/cn/data-link-layer/","/computer/cn/netwark-layer/","/computer/cn/physical-layer/","/computer/cn/transaction-layer/","/404.html","/computer/","/java/jvm/"],je="SEARCH_PRO_QUERY_HISTORY",g=_(je,[]),fe=()=>{const{queryHistoryCount:s}=R,l=s>0;return{enabled:l,queryHistory:g,addQueryHistory:r=>{l&&(g.value=Array.from(new Set([r,...g.value.slice(0,s-1)])))},removeQueryHistory:r=>{g.value=[...g.value.slice(0,r),...g.value.slice(r+1)]}}},F=s=>qe[s.id]+("anchor"in s?`#${s.anchor}`:""),He="SEARCH_PRO_RESULT_HISTORY",{resultHistoryCount:I}=R,b=_(He,[]),we=()=>{const s=I>0;return{enabled:s,resultHistory:b,addResultHistory:l=>{if(s){const r={link:F(l),display:l.display};"header"in l&&(r.header=l.header),b.value=[r,...b.value.slice(0,I-1)]}},removeResultHistory:l=>{b.value=[...b.value.slice(0,l),...b.value.slice(l+1)]}}},Re=s=>{const l=de(),r=U(),x=ue(),o=L(0),j=w(()=>o.value>0),p=me([]);return he(()=>{const{search:v,terminate:Q}=pe(),k=ke(d=>{const q=d.join(" "),{searchFilter:D=h=>h,splitWord:S,suggestionsFilter:P,...y}=l.value;q?(o.value+=1,v(d.join(" "),r.value,y).then(h=>D(h,q,r.value,x.value)).then(h=>{o.value-=1,p.value=h}).catch(h=>{console.warn(h),o.value-=1,o.value||(p.value=[])})):p.value=[]},R.searchDelay-R.suggestDelay);Y([s,r],([d])=>k(d),{immediate:!0}),ve(()=>{Q()})}),{isSearching:j,results:p}};var Qe=Z({name:"SearchResult",props:{queries:{type:Array,required:!0},isFocusing:Boolean},emits:["close","updateQuery"],setup(s,{emit:l}){const r=ee(),x=U(),o=te(ae),{enabled:j,addQueryHistory:p,queryHistory:v,removeQueryHistory:Q}=fe(),{enabled:k,resultHistory:d,addResultHistory:q,removeResultHistory:D}=we(),S=j||k,P=se(s,"queries"),{results:y,isSearching:h}=Re(P),i=le({isQuery:!0,index:0}),u=L(0),m=L(0),z=w(()=>S&&(v.value.length>0||d.value.length>0)),C=w(()=>y.value.length>0),A=w(()=>y.value[u.value]||null),M=()=>{const{isQuery:e,index:t}=i;t===0?(i.isQuery=!e,i.index=e?d.value.length-1:v.value.length-1):i.index=t-1},G=()=>{const{isQuery:e,index:t}=i;t===(e?v.value.length-1:d.value.length-1)?(i.isQuery=!e,i.index=0):i.index=t+1},J=()=>{u.value=u.value>0?u.value-1:y.value.length-1,m.value=A.value.contents.length-1},K=()=>{u.value=u.value<y.value.length-1?u.value+1:0,m.value=0},V=()=>{m.value<A.value.contents.length-1?m.value+=1:K()},N=()=>{m.value>0?m.value-=1:J()},E=e=>e.map(t=>ye(t)?t:a(t[0],t[1])),W=e=>{if(e.type==="customField"){const t=ge[e.index]||"$content",[n,H=""]=be(t)?t[x.value].split("$content"):t.split("$content");return e.display.map(c=>a("div",E([n,...c,H])))}return e.display.map(t=>a("div",E(t)))},f=()=>{u.value=0,m.value=0,l("updateQuery",""),l("close")};return re("keydown",e=>{if(s.isFocusing){if(C.value){if(e.key==="ArrowUp")N();else if(e.key==="ArrowDown")V();else if(e.key==="Enter"){const t=A.value.contents[m.value];p(s.queries.join(" ")),q(t),r.push(F(t)),f()}}else if(k){if(e.key==="ArrowUp")M();else if(e.key==="ArrowDown")G();else if(e.key==="Enter"){const{index:t}=i;i.isQuery?(l("updateQuery",v.value[t]),e.preventDefault()):(r.push(d.value[t].link),f())}}}}),Y([u,m],()=>{var e;(e=document.querySelector(".search-pro-result-list-item.active .search-pro-result-item.active"))==null||e.scrollIntoView(!1)},{flush:"post"}),()=>a("div",{class:["search-pro-result-wrapper",{empty:s.queries.length?!C.value:!z.value}],id:"search-pro-results"},s.queries.length?h.value?a(ie,{hint:o.value.searching}):C.value?a("ul",{class:"search-pro-result-list"},y.value.map(({title:e,contents:t},n)=>{const H=u.value===n;return a("li",{class:["search-pro-result-list-item",{active:H}]},[a("div",{class:"search-pro-result-title"},e||o.value.defaultTitle),t.map((c,X)=>{const T=H&&m.value===X;return a(B,{to:F(c),class:["search-pro-result-item",{active:T,"aria-selected":T}],onClick:()=>{p(s.queries.join(" ")),q(c),f()}},()=>[c.type==="text"?null:a(c.type==="title"?oe:c.type==="heading"?ne:ce,{class:"search-pro-result-type"}),a("div",{class:"search-pro-result-content"},[c.type==="text"&&c.header?a("div",{class:"content-header"},c.header):null,a("div",W(c))])])})])})):o.value.emptyResult:S?z.value?[j?a("ul",{class:"search-pro-result-list"},a("li",{class:"search-pro-result-list-item"},[a("div",{class:"search-pro-result-title"},o.value.queryHistory),v.value.map((e,t)=>a("div",{class:["search-pro-result-item",{active:i.isQuery&&i.index===t}],onClick:()=>{l("updateQuery",e)}},[a(O,{class:"search-pro-result-type"}),a("div",{class:"search-pro-result-content"},e),a("button",{class:"search-pro-remove-icon",innerHTML:$,onClick:n=>{n.preventDefault(),n.stopPropagation(),Q(t)}})]))])):null,k?a("ul",{class:"search-pro-result-list"},a("li",{class:"search-pro-result-list-item"},[a("div",{class:"search-pro-result-title"},o.value.resultHistory),d.value.map((e,t)=>a(B,{to:e.link,class:["search-pro-result-item",{active:!i.isQuery&&i.index===t}],onClick:()=>{f()}},()=>[a(O,{class:"search-pro-result-type"}),a("div",{class:"search-pro-result-content"},[e.header?a("div",{class:"content-header"},e.header):null,a("div",e.display.map(n=>E(n)).flat())]),a("button",{class:"search-pro-remove-icon",innerHTML:$,onClick:n=>{n.preventDefault(),n.stopPropagation(),D(t)}})]))])):null]:o.value.emptyHistory:o.value.emptyResult)}});export{Qe as default};
