import{u as _,f as te,g as ae,h as U,i as se,P as re,t as le,j as ie,k as A,l as H,m as ne,n as Y,p as a,q as oe,R as B,s as de,v as ce,x as ue,C as me,y as pe,z as he,A as ve,B as ye,D as ge,E as be,F as ke,G as I,H as T,I as qe,J as R,K as je}from"./app-BNtv838J.js";const fe=["/","/about/","/database/","/dev-idea/","/dev-tools/homebrew.html","/dev-tools/","/front-end/","/java/","/project/","/resource-sharing/e-books.html","/resource-sharing/","/spring-series/","/about/author/","/about/journey/","/about/update/","/database/mysql/constraint.html","/database/mysql/dividing-databases-tables.html","/database/mysql/function-base.html","/database/mysql/innodb-engine.html","/database/mysql/innodb-mvcc.html","/database/mysql/master-slave-replication.html","/database/mysql/multi-table-query.html","/database/mysql/mysql-base.html","/database/mysql/mysql-index.html","/database/mysql/mysql-lock.html","/database/mysql/mysql-log.html","/database/mysql/mysql-manage.html","/database/mysql/mysql-trigger.html","/database/mysql/mysql-view.html","/database/mysql/read-write-separation.html","/database/mysql/","/database/mysql/sql-general-syntax.html","/database/mysql/sql-optimize.html","/database/mysql/sql-perfomance-analysis.html","/database/mysql/storage-engine.html","/database/mysql/store-procedure.html","/database/mysql/transaction.html","/database/redis/","/database/redis/redis-advance-batch-optimization.html","/database/redis/redis-advance-cache-issues.html","/database/redis/redis-advance-cache-synchronization.html","/database/redis/redis-advance-cluster-best-practices.html","/database/redis/redis-advance-jvm-process-cache.html","/database/redis/redis-advance-key-value-design.html","/database/redis/redis-advance-lua-language.html","/database/redis/redis-advance-master-slave.html","/database/redis/redis-advance-multi-level-cache.html","/database/redis/redis-advance-persistence.html","/database/redis/redis-advance-sentinel.html","/database/redis/redis-advance-server-optimization.html","/database/redis/redis-advance-sharded-cluster.html","/database/redis/redis-client-jedis-connection-pool.html","/database/redis/redis-client-jedis-quick-start.html","/database/redis/redis-client-redistemplate-redis-serializer.html","/database/redis/redis-client-spring-data-redis.html","/database/redis/redis-introduction-base-commind.html","/database/redis/redis-introduction-concept-fundamental.html","/database/redis/redis-introduction-five-base-datatype.html","/database/redis/redis-introduction-pub-sub.html","/database/redis/redis-introduction-scription.html","/database/redis/redis-introduction-stream.html","/database/redis/redis-introduction-three-special-datatype.html","/database/redis/redis-introduction-transaction.html","/database/redis/redis-principle-IO.html","/database/redis/redis-principle-base-datatype-implement.html","/database/redis/redis-principle-communication-protocol.html","/database/redis/redis-principle-datastruct-underlying-implementation.html","/database/redis/redis-principle-memery-strategy.html","/database/redis/redis-principle-netword-model.html","/database/redis/redis-principle-redisobject.html","/computer/cn/","/computer/cn/cn-tcp-3-4.html","/computer/co/","/computer/ds/complexity.html","/computer/ds/data-structure-concept.html","/computer/ds/linear-list.html","/computer/ds/","/computer/os/","/dev-idea/design-patterns/","/dev-tools/docker/docker-basic.html","/dev-tools/docker/docker-compose.html","/dev-tools/docker/docker-container-connection.html","/dev-tools/docker/docker-dockerfile.html","/dev-tools/docker/docker-helloworld.html","/dev-tools/docker/docker-install.html","/dev-tools/docker/docker-introduce.html","/dev-tools/docker/docker-object.html","/dev-tools/docker/docker-warehouse.html","/dev-tools/docker/docker-web-containers.html","/dev-tools/docker/","/dev-tools/git/git-basic-operations.html","/dev-tools/git/git-branch-manage.html","/dev-tools/git/git-content-operations.html","/dev-tools/git/git-introduce-install.html","/dev-tools/git/git-remote-manage.html","/dev-tools/git/git-workspace-index-repo.html","/dev-tools/git/","/dev-tools/idea/","/dev-tools/idea/shortcuts.html","/dev-tools/maven/introduce-install-config.html","/dev-tools/maven/","/front-end/vue3/create-vue-project.html","/front-end/vue3/","/java/collection/list-arraylist.html","/java/collection/list-linkedlist.html","/java/collection/list-stack.html","/java/collection/list-vectore.html","/java/collection/map-hashmap.html","/java/collection/map-linkedhashmap.html","/java/collection/map-treemap.html","/java/collection/queue-deque.html","/java/collection/queue-queue.html","/java/collection/","/java/collection/set-hashset.html","/java/collection/set-linkedhashset.html","/java/collection/set-treeset.html","/java/core/annotation.html","/java/core/basic-grammar.html","/java/core/class-and-object.html","/java/core/exception.html","/java/core/generics.html","/java/core/jdk-env-path.html","/java/core/","/java/core/reflection.html","/java/io/file.html","/java/io/io-stream-system.html","/java/io/","/java/jvm/redemd.html","/java/thread/","/project/sky-take-out/BackEnd-Dev-Build.html","/project/sky-take-out/Database-Dev-Build.html","/project/sky-take-out/FrontEnd-Dev-Build.html","/project/sky-take-out/","/spring-series/spring/annotations-beans.html","/spring-series/spring/implement-ioc.html","/spring-series/spring/introduction-case.html","/spring-series/spring/","/spring-series/spring/spring-aop.html","/spring-series/spring/spring-aot.html","/spring-series/spring/spring-data-validation.html","/spring-series/spring/spring-i18n.html","/spring-series/spring/spring-ioc.html","/spring-series/spring/spring-junit.html","/spring-series/spring/spring-resources.html","/spring-series/spring/spring-summarize.html","/spring-series/spring/spring-transaction.html","/spring-series/spring/xml-beans.html","/spring-series/springboot/","/computer/cn/application-layer/","/computer/cn/cn-architecture/","/computer/cn/cn-architecture/cn-classification.html","/computer/cn/cn-architecture/cn-notion-composition-function.html","/computer/cn/data-link-layer/","/computer/cn/netwark-layer/","/computer/cn/physical-layer/","/computer/cn/transaction-layer/","/dev-idea/design-patterns/behaiver-patterns/observer-pattern.html","/dev-idea/design-patterns/behaiver-patterns/","/dev-idea/design-patterns/create-patterns/factory-pattern.html","/dev-idea/design-patterns/create-patterns/","/dev-idea/design-patterns/create-patterns/singleton-pattern.html","/dev-idea/design-patterns/structural-patterns/adapter-pattern.html","/dev-idea/design-patterns/structural-patterns/","/404.html","/computer/","/java/jvm/"],we="SEARCH_PRO_QUERY_HISTORY",g=_(we,[]),He=()=>{const{queryHistoryCount:s}=R,r=s>0;return{enabled:r,queryHistory:g,addQueryHistory:l=>{r&&(g.value=Array.from(new Set([l,...g.value.slice(0,s-1)])))},removeQueryHistory:l=>{g.value=[...g.value.slice(0,l),...g.value.slice(l+1)]}}},F=s=>fe[s.id]+("anchor"in s?`#${s.anchor}`:""),Re="SEARCH_PRO_RESULT_HISTORY",{resultHistoryCount:$}=R,b=_(Re,[]),xe=()=>{const s=$>0;return{enabled:s,resultHistory:b,addResultHistory:r=>{if(s){const l={link:F(r),display:r.display};"header"in r&&(l.header=r.header),b.value=[l,...b.value.slice(0,$-1)]}},removeResultHistory:r=>{b.value=[...b.value.slice(0,r),...b.value.slice(r+1)]}}},Qe=s=>{const r=me(),l=U(),x=pe(),n=A(0),j=H(()=>n.value>0),h=he([]);return ve(()=>{const{search:v,terminate:Q}=ye(),k=qe(c=>{const q=c.join(" "),{searchFilter:D=p=>p,splitWord:S,suggestionsFilter:z,...y}=r.value;q?(n.value+=1,v(c.join(" "),l.value,y).then(p=>D(p,q,l.value,x.value)).then(p=>{n.value-=1,h.value=p}).catch(p=>{console.warn(p),n.value-=1,n.value||(h.value=[])})):h.value=[]},R.searchDelay-R.suggestDelay);Y([s,l],([c])=>k(c),{immediate:!0}),ge(()=>{Q()})}),{isSearching:j,results:h}};var Se=te({name:"SearchResult",props:{queries:{type:Array,required:!0},isFocusing:Boolean},emits:["close","updateQuery"],setup(s,{emit:r}){const l=ae(),x=U(),n=se(re),{enabled:j,addQueryHistory:h,queryHistory:v,removeQueryHistory:Q}=He(),{enabled:k,resultHistory:c,addResultHistory:q,removeResultHistory:D}=xe(),S=j||k,z=le(s,"queries"),{results:y,isSearching:p}=Qe(z),i=ie({isQuery:!0,index:0}),u=A(0),m=A(0),O=H(()=>S&&(v.value.length>0||c.value.length>0)),C=H(()=>y.value.length>0),E=H(()=>y.value[u.value]||null),M=()=>{const{isQuery:e,index:t}=i;t===0?(i.isQuery=!e,i.index=e?c.value.length-1:v.value.length-1):i.index=t-1},G=()=>{const{isQuery:e,index:t}=i;t===(e?v.value.length-1:c.value.length-1)?(i.isQuery=!e,i.index=0):i.index=t+1},J=()=>{u.value=u.value>0?u.value-1:y.value.length-1,m.value=E.value.contents.length-1},K=()=>{u.value=u.value<y.value.length-1?u.value+1:0,m.value=0},V=()=>{m.value<E.value.contents.length-1?m.value+=1:K()},N=()=>{m.value>0?m.value-=1:J()},L=e=>e.map(t=>je(t)?t:a(t[0],t[1])),W=e=>{if(e.type==="customField"){const t=be[e.index]||"$content",[o,w=""]=ke(t)?t[x.value].split("$content"):t.split("$content");return e.display.map(d=>a("div",L([o,...d,w])))}return e.display.map(t=>a("div",L(t)))},f=()=>{u.value=0,m.value=0,r("updateQuery",""),r("close")},X=()=>j?a("ul",{class:"search-pro-result-list"},a("li",{class:"search-pro-result-list-item"},[a("div",{class:"search-pro-result-title"},n.value.queryHistory),v.value.map((e,t)=>a("div",{class:["search-pro-result-item",{active:i.isQuery&&i.index===t}],onClick:()=>{r("updateQuery",e)}},[a(I,{class:"search-pro-result-type"}),a("div",{class:"search-pro-result-content"},e),a("button",{class:"search-pro-remove-icon",innerHTML:T,onClick:o=>{o.preventDefault(),o.stopPropagation(),Q(t)}})]))])):null,Z=()=>k?a("ul",{class:"search-pro-result-list"},a("li",{class:"search-pro-result-list-item"},[a("div",{class:"search-pro-result-title"},n.value.resultHistory),c.value.map((e,t)=>a(B,{to:e.link,class:["search-pro-result-item",{active:!i.isQuery&&i.index===t}],onClick:()=>{f()}},()=>[a(I,{class:"search-pro-result-type"}),a("div",{class:"search-pro-result-content"},[e.header?a("div",{class:"content-header"},e.header):null,a("div",e.display.map(o=>L(o)).flat())]),a("button",{class:"search-pro-remove-icon",innerHTML:T,onClick:o=>{o.preventDefault(),o.stopPropagation(),D(t)}})]))])):null;return ne("keydown",e=>{if(s.isFocusing){if(C.value){if(e.key==="ArrowUp")N();else if(e.key==="ArrowDown")V();else if(e.key==="Enter"){const t=E.value.contents[m.value];h(s.queries.join(" ")),q(t),l.push(F(t)),f()}}else if(k){if(e.key==="ArrowUp")M();else if(e.key==="ArrowDown")G();else if(e.key==="Enter"){const{index:t}=i;i.isQuery?(r("updateQuery",v.value[t]),e.preventDefault()):(l.push(c.value[t].link),f())}}}}),Y([u,m],()=>{var e;(e=document.querySelector(".search-pro-result-list-item.active .search-pro-result-item.active"))==null||e.scrollIntoView(!1)},{flush:"post"}),()=>a("div",{class:["search-pro-result-wrapper",{empty:s.queries.length?!C.value:!O.value}],id:"search-pro-results"},s.queries.length?p.value?a(oe,{hint:n.value.searching}):C.value?a("ul",{class:"search-pro-result-list"},y.value.map(({title:e,contents:t},o)=>{const w=u.value===o;return a("li",{class:["search-pro-result-list-item",{active:w}]},[a("div",{class:"search-pro-result-title"},e||n.value.defaultTitle),t.map((d,ee)=>{const P=w&&m.value===ee;return a(B,{to:F(d),class:["search-pro-result-item",{active:P,"aria-selected":P}],onClick:()=>{h(s.queries.join(" ")),q(d),f()}},()=>[d.type==="text"?null:a(d.type==="title"?de:d.type==="heading"?ce:ue,{class:"search-pro-result-type"}),a("div",{class:"search-pro-result-content"},[d.type==="text"&&d.header?a("div",{class:"content-header"},d.header):null,a("div",W(d))])])})])})):n.value.emptyResult:S?O.value?[X(),Z()]:n.value.emptyHistory:n.value.emptyResult)}});export{Se as default};
